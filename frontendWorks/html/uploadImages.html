<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no" name="viewport">
    <title>Image Upload</title>

    <link rel="stylesheet" href="../dist/modules/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../dist/modules/ionicons/css/ionicons.min.css">
    <link rel="stylesheet" href="../dist/modules/fontawesome/web-fonts-with-css/css/fontawesome-all.min.css">

    <link rel="stylesheet" href="../dist/css/demo.css">
    <link rel="stylesheet" href="../dist/css/style.css">
    <style type="text/css">
        #inputfile{
            width: 50%;
            margin-left: 40%;
        }
        .file_upload{
            margin-left: 50%;
            width: 50%;
        }
    </style>

    <script src="https://algorithmia.com/v1/clients/js/algorithmia-0.2.0.js" type="text/javascript"></script>

</head>

<body class="sidebar-gone sidebar-gone sidebar-gone">
<div id="app">
    <div class="main-wrapper">
        <div class="navbar-bg"></div>
        <nav class="navbar navbar-expand-lg main-navbar">
            <form class="form-inline mr-auto">
                <ul class="navbar-nav mr-3">
                    <li><a href="#" data-toggle="sidebar" class="nav-link nav-link-lg"><i class="ion ion-navicon-round"></i></a></li>
                    <li><a href="#" data-toggle="search" class="nav-link nav-link-lg d-sm-none"><i class="ion ion-search"></i></a></li>
                </ul>
                <div class="search-element">
                    <input class="form-control" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn" type="submit"><i class="ion ion-search"></i></button>
                </div>
            </form>
            <ul class="navbar-nav navbar-right">
                <li class="dropdown dropdown-list-toggle"><a href="#" data-toggle="dropdown" class="nav-link notification-toggle nav-link-lg beep"><i class="ion ion-ios-bell-outline"></i></a>
                    <div class="dropdown-menu dropdown-list dropdown-menu-right">
                        <div class="dropdown-header">Notifications
                            <div class="float-right">
                                <a href="#">View All</a>
                            </div>
                        </div>
                        <div class="dropdown-list-content">
                            <a href="#" class="dropdown-item dropdown-item-unread">
                                <img alt="image" src="../dist/img/avatar/avatar-1.jpeg" class="rounded-circle dropdown-item-img">
                                <div class="dropdown-item-desc">
                                    <b>Shikhar</b> has uploaded <b>Operating System</b> Notes
                                    <div class="time">30secs ago</div>
                                </div>
                            </a>

                        </div>
                    </div>
                </li>
                <li class="dropdown"><a href="#" data-toggle="dropdown" class="nav-link dropdown-toggle nav-link-lg">
                    <i class="ion ion-android-person d-lg-none"></i>
                    <div class="d-sm-none d-lg-inline-block">Hi, Shikhar Agnihotri</div></a>
                    <div class="dropdown-menu dropdown-menu-right">
                        <a href="#" class="dropdown-item has-icon">
                            <i class="ion ion-android-person"></i> Profile
                        </a>
                        <a href="/html" class="dropdown-item has-icon">
                            <i class="ion ion-log-out"></i> Logout
                        </a>
                    </div>
                </li>
            </ul>
        </nav>

        <div class="main-content">
            <section class="section">
                <h1 class="section-header">
                    <div>Upload Images Here</div>
                </h1>
                <form ref='uploadForm' id='uploadForm' method='post'  encType="multipart/form-data">
                  <center><div><input type="file" name="sampleFile" accept=".jpeg, .jpg, .png"  required /></div></center>
                  <br>
                </form>
                <center><button id="submit_btn">ColorEm</button></center>
            </section>
            <section class="section">
                <center><img class="hide" src="" id="black_image" height="256px" width="256px">
                <img class="hide" src="" id="color_image" height="256px" width="256px"></center>
            </section>
        </div>

    </div>
</div>

<script src="../dist/modules/jquery.min.js"></script>
<script src="../dist/modules/popper.js"></script>
<script src="../dist/modules/tooltip.js"></script>
<script src="../dist/modules/bootstrap/js/bootstrap.min.js"></script>
<script src="../dist/modules/nicescroll/jquery.nicescroll.min.js"></script>
<script src="../dist/modules/scroll-up-bar/dist/scroll-up-bar.min.js"></script>
<script src="../dist/js/sa-functions.js"></script>

<script src="../dist/modules/chart.min.js"></script>
<script>
    var ctx = document.getElementById("myChart").getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
            datasets: [{
                label: 'Statistics',
                data: [460, 458, 330, 502, 430, 610, 488],
                borderWidth: 2,
                backgroundColor: 'rgb(87,75,144)',
                borderColor: 'rgb(87,75,144)',
                borderWidth: 2.5,
                pointBackgroundColor: '#ffffff',
                pointRadius: 4
            }]
        },
        options: {
            legend: {
                display: false
            },
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true,
                        stepSize: 150
                    }
                }],
                xAxes: [{
                    ticks: {
                        display: false
                    },
                    gridLines: {
                        display: false
                    }
                }]
            },
        }
    });

    var ctx = document.getElementById("myChart2").getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
            datasets: [{
                label: 'Statistics',
                data: [460, 458, 330, 502, 430, 610, 488],
                borderWidth: 2,
                backgroundColor: 'rgb(87,75,144)',
                borderColor: 'rgb(87,75,144)',
                borderWidth: 2.5,
                pointBackgroundColor: '#ffffff',
                pointRadius: 4
            }]
        },
        options: {
            legend: {
                display: false
            },
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true,
                        stepSize: 150
                    }
                }],
                xAxes: [{
                    ticks: {
                        display: false
                    },
                    gridLines: {
                        display: false
                    }
                }]
            },
        }
    });

    var ctx = document.getElementById("myChart3").getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
            datasets: [{
                data: [
                    80,
                    50,
                    40,
                    30,
                    20,
                ],
                backgroundColor: [
                    '#574B90',
                    '#28a745',
                    '#ffc107',
                    '#dc3545',
                    '#343a40',
                ],
                label: 'Dataset 1'
            }],
            labels: [
                'Purple',
                'Green',
                'Yellow',
                'Red',
                'Black'
            ],
        },
        options: {
            responsive: true,
            legend: {
                position: 'bottom',
            },
        }
    });

    var ctx = document.getElementById("myChart4").getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'pie',
        data: {
            datasets: [{
                data: [
                    80,
                    50,
                    40,
                    30,
                    20,
                ],
                backgroundColor: [
                    '#574B90',
                    '#28a745',
                    '#ffc107',
                    '#dc3545',
                    '#343a40',
                ],
                label: 'Dataset 1'
            }],
            labels: [
                'Purple',
                'Green',
                'Yellow',
                'Red',
                'Black'
            ],
        },
        options: {
            responsive: true,
            legend: {
                position: 'bottom',
            },
        }
    });
</script>
<script>
    function send_image(e) {

            var image = new FormData($('#uploadForm')[0]);
        $.ajax({
          url: "/imageupload",
          type: 'POST',
          data: image,
          processData: false,
          contentType: false,
          success: function (data) {
            console.log(data);
          }
        }).done( (data) => {
            console.log(data)
                // $("#black_image").removeClass("hide")
                // $("#black_image").attr("src","");
                $("#black_image").attr("src","http://localhost:3000/dist/imageUsers/black_image.jpg");

               // $("#color_image").removeClass("hide")
               //  $("#color_image").attr("src","")
                $("#color_image").attr("src","http://localhost:3000/dist/image_Output/img_0.png")
        })
            original_model()

    }

    $('#submit_btn').click(()=>send_image())

    function original_model() {
        setTimeout(()=> {
            var input = {
                "image": "/dist/imageUsers/black_image.jpg"
            };
            Algorithmia.client("simk2rPWnlgo0ujH5Zl/ixo8BBl1")
                .algo("deeplearning/ColorfulImageColorization/1.1.13?timeout=300") // timeout is optional
                .pipe(input)
                .then(function (output) {
                    console.log(output);
                });
        },5000)
    }

</script>
<script src="../dist/js/scripts.js"></script>
<script src="../dist/js/custom.js"></script>
<script src="../dist/js/demo.js"></script>
<script src="../selfJS/uploadFiles.js"></script>

</body>
</html>
